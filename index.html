<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pacman Woordenschat PRO - Levels & Powerups</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: #020617; color: #fff; padding: 20px; }
        .container { max-width: 1300px; margin: 0 auto; display: grid; grid-template-columns: 400px 1fr; gap: 20px; }
        header { grid-column: span 2; text-align: center; padding: 20px; background: #1e293b; border: 3px solid #3b82f6; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
        h1 { color: #fbbf24; text-transform: uppercase; letter-spacing: 2px; }
        
        /* Quiz Sectie */
        .section { background: #1e293b; padding: 20px; border-radius: 15px; border: 2px solid #334155; }
        .word-list { max-height: 120px; overflow-y: auto; background: #0f172a; padding: 10px; margin: 10px 0; border-radius: 8px; font-size: 0.8em; border: 1px solid #475569; }
        .word-item { padding: 4px; border-bottom: 1px solid #1e293b; color: #94a3b8; }
        
        .question-box { background: #0f172a; padding: 15px; border-radius: 10px; margin: 15px 0; min-height: 90px; border-left: 5px solid #fbbf24; font-weight: bold; display: flex; align-items: center; justify-content: center; text-align: center; }
        .option-btn { width: 100%; text-align: left; padding: 12px; margin-bottom: 8px; background: #334155; color: white; border: 1px solid #475569; cursor: pointer; border-radius: 8px; transition: 0.2s; }
        .option-btn:hover { background: #475569; border-color: #fbbf24; }
        .correct { background: #15803d !important; }
        .incorrect { background: #b91c1c !important; }
        
        /* Game Sectie */
        canvas { background: #000; border: 4px solid #334155; border-radius: 10px; display: block; margin: 0 auto; transition: border-color 0.5s; }
        .start-game-btn { 
            width: 100%; padding: 18px; font-size: 1.3rem; font-weight: bold; border-radius: 10px; border: none; 
            background: #475569; color: #94a3b8; cursor: not-allowed; margin-top: 15px;
        }
        .unlocked { background: linear-gradient(135deg, #f59e0b, #d97706) !important; color: white !important; cursor: pointer !important; box-shadow: 0 0 20px rgba(245,158,11,0.4); animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }
        
        .stats-bar { display: flex; justify-content: space-between; margin-top: 10px; padding: 10px; background: #0f172a; border-radius: 8px; font-weight: bold; color: #fbbf24; }
        .feedback { padding: 10px; height: 40px; text-align: center; font-weight: bold; }
        .highscore-box { margin-top: 15px; font-size: 0.9em; color: #60a5fa; text-align: center; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Pacman Woordenschat <span style="color:#fff">PRO</span></h1>
        <p>Haal 5 punten om de Power-ups te activeren!</p>
    </header>

    <div class="section">
        <h3>1. De Woordentest</h3>
        <div class="word-list" id="word-list">Laden...</div>
        <button class="option-btn" style="background: #10b981; text-align: center; font-weight: bold; border:none;" onclick="generateQuestions()">NIEUWE TEST STARTEN</button>
        <div id="quiz-area">
            <div class="question-box" id="question-box">Klik op de groene knop om te beginnen.</div>
            <div id="options-container"></div>
            <div id="feedback" class="feedback"></div>
            <button id="next-btn" class="option-btn" style="display:none; background:#fbbf24; color:black; text-align:center; font-weight:bold; border:none;" onclick="loadQuestion()">VOLGENDE VRAAG ➔</button>
        </div>
        <div style="margin-top:20px; text-align: center;">
            <p>Voortgang: <span id="correct-count" style="color:#fbbf24; font-size: 1.5em; font-weight:bold;">0</span> / 5</p>
        </div>
    </div>

    <div class="game-section section">
        <div class="stats-bar">
            <span>Score: <span id="game-score">0</span></span>
            <span>Level: <span id="game-level">1</span></span>
            <span id="power-msg" style="color:#22c55e; display:none;">POWER-UP ACTIEF!</span>
        </div>
        <canvas id="gameCanvas" width="600" height="400"></canvas>
        <button id="start-game-btn" class="start-game-btn" disabled onclick="startGame()">START HET SPEL</button>
        <div class="highscore-box">HOOGSTE SCORE: <span id="high-score">0</span></div>
    </div>
</div>

<script>
// ================= DATA =================
const rawWords = [
    { w: "zeer goede", c: "uitmuntende", o: ["aangename", "flinke"] },
    { w: "crèche", c: "kinderdagverblijf", o: ["gietemmer", "mensen met wie je verbonden bent"] },
    { w: "voerbakken", c: "troggen", o: ["donateurs", "filialen"] },
    { w: "ophef", c: "beroering", o: ["argumentatie", "walging"] },
    { w: "Een ... plan", c: "indrukwekkend", o: ["idioot", "gevoelig"] },
    { w: "fauteuil", c: "armstoel", o: ["leidinggevende functie", "traditioneel"] },
    { w: "rechten ... aan", c: "ontlenen", o: ["controleren", "bereiken"] },
    { w: "correspondentie", c: "briefwisseling", o: ["armstoel", "goedkeuring"] },
    { w: "barok", c: "stijl met kenmerk overdadige vormen", o: ["godsdienstuiting", "meer dan nodig is"] },
    { w: "aangewakkerd", c: "feller doen branden", o: ["niet fris", "met betrekking tot"] },
    { w: "belangstellend", c: "erbij betrokken zijn", o: ["met veel betekenis", "beter voordoen dan de werkelijkheid"] },
    { w: ".... weer", c: "onstuimig", o: ["sober", "uitbundig"] },
    { w: "eerbied", c: "respect", o: ["plotselinge gedachte", "godsdienst"] },
    { w: "het schip is ...", c: "buitengaats", o: ["enigszins", "tenminste"] },
    { w: "tja, dan vraag je...", c: "erom", o: ["ertoe", "erdoor"] },
    { w: "door ontsporing is het ... afgesloten", c: "traject", o: ["paviljoen", "festival"] },
    { w: "mode", c: "manier van kleden, denken, taalgebruik in een bepaalde tijd", o: ["humeur", "tekst in een krant"] },
    { w: "kanon", c: "zwaar vuurwapen met lange loop", o: ["machinegeweer", "handvuurwapen"] },
    { w: "moord / zware vorm van...", c: "doodslag", o: ["aanranding", "slijtage"] },
    { w: "hulp in de ..", c: "huishouding", o: ["administratie", "huisraad"] },
    { w: "continentaal", c: "behoort tot het vaste land", o: ["attractief", "laatste rustplaats"] },
    { w: "de ... in Europa", c: "economie", o: ["dyslexie", "criminaliteit"] },
    { w: "verandering van situatie", c: "overgang", o: ["omruil", "erosie"] },
    { w: "kleine ruimte in huis", c: "vliering", o: ["bedding", "achterkant"] },
    { w: "flora", c: "plantenwereld", o: ["wetenschap over de bodem van de aarde", "dierenwereld"] },
    { w: "kleding laten stomen", c: "door stoom schoonmaken", o: ["in vroegere staat herstellen", "kleding gladmaken met een strijkbout"] },
    { w: "bloederig slijm", c: "met veel bloed bedekt", o: ["waar veel van is", "gruwelijk"] },
    { w: "social media ... elkaar", c: "becommentariëren", o: ["bevrijden", "bewonderen"] },
    { w: "de ... is 4-4", c: "tussenstand", o: ["overtreding", "overwinning"] },
    { w: "opbouw van een tekst", c: "manier waarop de tekst is samengesteld", o: ["inleiding", "opschudding"] }
];

let questions = [];
let currentQIndex = 0;
let correctScore = 0;
let highScore = 0;

// ================= QUIZ LOGICA =================
function updateWordList() {
    const list = document.getElementById('word-list');
    list.innerHTML = rawWords.map(item => `<div class="word-item"><b>${item.w}</b> = ${item.c}</div>`).join('');
}

function generateQuestions() {
    correctScore = 0;
    currentQIndex = 0;
    document.getElementById('correct-count').innerText = "0";
    questions = rawWords.sort(() => Math.random() - 0.5).map(item => {
        let allOptions = [item.c, ...item.o].sort(() => Math.random() - 0.5);
        return { q: item.w, correct: item.c, options: allOptions };
    });
    loadQuestion();
}

function loadQuestion() {
    const q = questions[currentQIndex];
    document.getElementById('feedback').innerText = '';
    document.getElementById('next-btn').style.display = 'none';
    document.getElementById('question-box').innerText = `Wat is: "${q.q}"?`;
    const container = document.getElementById('options-container');
    container.innerHTML = '';
    q.options.forEach(opt => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.innerText = opt;
        btn.onclick = () => checkAnswer(opt, btn);
        container.appendChild(btn);
    });
}

function checkAnswer(selected, btn) {
    const q = questions[currentQIndex];
    document.querySelectorAll('.option-btn').forEach(b => b.style.pointerEvents = 'none');
    const feedback = document.getElementById('feedback');

    if(selected === q.correct) {
        btn.classList.add('correct');
        feedback.innerText = "Super! +1 punt";
        feedback.style.color = "#22c55e";
        correctScore++;
        document.getElementById('correct-count').innerText = correctScore;
        if(correctScore >= 5) unlockGame();
    } else {
        btn.classList.add('incorrect');
        feedback.innerText = `Foutje! Het was: ${q.correct}`;
        feedback.style.color = "#ef4444";
    }
    currentQIndex++;
    document.getElementById('next-btn').style.display = 'block';
}

function unlockGame() {
    const btn = document.getElementById('start-game-btn');
    btn.disabled = false;
    btn.classList.add('unlocked');
    document.getElementById('gameCanvas').style.borderColor = "#fbbf24";
}

// ================= GAME ENGINE PRO =================
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const tileSize = 20;
let gameActive = false;
let score = 0;
let level = 1;
let animationId;
let powerActive = false;
let powerTimer = 0;

let pacman = { x: 20, y: 20, dir: 'right', nextDir: 'right' };
let ghosts = [];

const originalMap = [
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,3,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,3,1],
    [1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,0,1,1,1,0,1],
    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
    [1,0,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,0,1,1],
    [1,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,1],
    [1,1,1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,1,0,1,1,1,1,0,1,0,1,1,1,1],
    [1,2,2,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,2,2,1,1],
    [1,1,1,0,1,0,1,1,0,1,1,1,2,2,2,2,2,2,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,0,0,0,0,0,0,0,1,2,2,2,2,2,2,2,2,2,1,0,0,0,0,0,0,0,0,0,1],
    [1,1,1,0,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,2,2,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,2,2,1,1],
    [1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1],
    [1,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,1],
    [1,0,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,0,1,1],
    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
    [1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,0,1,1,1,0,1],
    [1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
];

let currentMap = [];

function initLevel() {
    currentMap = originalMap.map(row => [...row]);
    pacman = { x: 20, y: 20, dir: 'right', nextDir: 'right' };
    ghosts = [
        { x: 280, y: 180, color: 'red', dir: 'up', initialX: 280, initialY: 180 },
        { x: 300, y: 180, color: 'pink', dir: 'down', initialX: 300, initialY: 180 },
        { x: 280, y: 200, color: 'cyan', dir: 'left', initialX: 280, initialY: 200 },
        { x: 300, y: 200, color: 'orange', dir: 'right', initialX: 300, initialY: 200 }
    ];
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Map & Items
    for(let r=0; r<currentMap.length; r++) {
        for(let c=0; c<currentMap[r].length; c++) {
            if(currentMap[r][c] === 1) {
                ctx.fillStyle = "#1e40af";
                ctx.fillRect(c*tileSize, r*tileSize, tileSize, tileSize);
            } else if(currentMap[r][c] === 0) { // Bolletje
                ctx.fillStyle = "#fbbf24";
                ctx.beginPath(); ctx.arc(c*tileSize + 10, r*tileSize + 10, 2, 0, Math.PI*2); ctx.fill();
            } else if(currentMap[r][c] === 3) { // Powerup
                ctx.fillStyle = "#fff";
                ctx.beginPath(); ctx.arc(c*tileSize + 10, r*tileSize + 10, 6, 0, Math.PI*2); ctx.fill();
            }
        }
    }

    // Pacman
    ctx.fillStyle = "yellow";
    ctx.beginPath();
    let mouth = (Math.sin(Date.now() / 100) + 1) * 0.2;
    let rotation = pacman.dir === 'right' ? 0 : pacman.dir === 'down' ? 0.5 : pacman.dir === 'left' ? 1 : 1.5;
    ctx.arc(pacman.x + 10, pacman.y + 10, 8, (rotation + mouth) * Math.PI, (rotation + 2 - mouth) * Math.PI);
    ctx.lineTo(pacman.x + 10, pacman.y + 10); ctx.fill();

    // Ghosts
    ghosts.forEach(g => {
        ctx.fillStyle = powerActive ? "#1e40af" : g.color;
        if (powerActive && powerTimer < 100 && powerTimer % 20 < 10) ctx.fillStyle = "#fff"; // Knipperen aan eind
        ctx.beginPath();
        ctx.arc(g.x + 10, g.y + 10, 8, Math.PI, 0);
        ctx.lineTo(g.x + 18, g.y + 18); ctx.lineTo(g.x + 2, g.y + 18); ctx.fill();
    });
}

function move(e, speed) {
    let nx = e.x, ny = e.y;
    if(e.dir === 'left') nx -= speed;
    if(e.dir === 'right') nx += speed;
    if(e.dir === 'up') ny -= speed;
    if(e.dir === 'down') ny += speed;

    let r = Math.floor((ny+2)/tileSize), c = Math.floor((nx+2)/tileSize);
    let r2 = Math.floor((ny+17)/tileSize), c2 = Math.floor((nx+17)/tileSize);

    if(currentMap[r][c] !== 1 && currentMap[r2][c2] !== 1 && currentMap[r][c2] !== 1 && currentMap[r2][c] !== 1) {
        e.x = nx; e.y = ny; return true;
    }
    return false;
}

function update() {
    if(!gameActive) return;

    move(pacman, 2.5);

    // Items eten
    let gx = Math.floor((pacman.x+10)/tileSize), gy = Math.floor((pacman.y+10)/tileSize);
    if(currentMap[gy][gx] === 0) {
        currentMap[gy][gx] = 2; score += 10;
    } else if(currentMap[gy][gx] === 3) {
        currentMap[gy][gx] = 2; powerActive = true; powerTimer = 400;
        document.getElementById('power-msg').style.display = 'inline';
    }

    if(powerActive) {
        powerTimer--;
        if(powerTimer <= 0) { powerActive = false; document.getElementById('power-msg').style.display = 'none'; }
    }

    // Ghost AI
    let ghostSpeed = 1 + (level * 0.2);
    if(powerActive) ghostSpeed *= 0.5;

    ghosts.forEach((g, index) => {
        if(!move(g, ghostSpeed)) {
            const dirs = ['up', 'down', 'left', 'right'];
            g.dir = dirs[Math.floor(Math.random()*4)];
        }

        // Collision
        if(Math.abs(g.x - pacman.x) < 15 && Math.abs(g.y - pacman.y) < 15) {
            if(powerActive) {
                // Ghost opeten
                g.x = g.initialX; g.y = g.initialY; score += 200;
            } else {
                gameActive = false; 
                if(score > highScore) { highScore = score; document.getElementById('high-score').innerText = highScore; }
                alert("GAME OVER! Score: " + score);
                document.getElementById('start-game-btn').innerText = "OPNIEUW PROBEREN";
            }
        }
    });

    // Check Level Win
    if(!currentMap.some(row => row.includes(0))) {
        level++;
        document.getElementById('game-level').innerText = level;
        alert("LEVEL VOLTOOID! Op naar level " + level);
        initLevel();
    }

    document.getElementById('game-score').innerText = score;
    draw();
    animationId = requestAnimationFrame(update);
}

function startGame() {
    cancelAnimationFrame(animationId);
    score = 0; level = 1;
    document.getElementById('game-level').innerText = level;
    initLevel();
    gameActive = true;
    update();
}

window.addEventListener("keydown", e => {
    if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)) {
        e.preventDefault(); pacman.dir = e.key.replace("Arrow", "").toLowerCase();
    }
});

updateWordList();
initLevel();
draw();
</script>
</body>
</html>
