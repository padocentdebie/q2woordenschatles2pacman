<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pacman Woordenschat PRO - XL Maze</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
        body { background: #020617; color: #fff; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; display: grid; grid-template-columns: 350px 1fr; gap: 20px; }
        header { grid-column: span 2; text-align: center; padding: 15px; background: #1e293b; border: 3px solid #3b82f6; border-radius: 15px; }
        .section { background: #1e293b; padding: 20px; border-radius: 15px; border: 2px solid #334155; }
        .question-box { background: #0f172a; padding: 20px; border-radius: 10px; margin: 15px 0; min-height: 120px; border-left: 5px solid #fbbf24; display: flex; align-items: center; justify-content: center; text-align: center; font-weight: bold; font-size: 1.1em; }
        .option-btn { width: 100%; text-align: left; padding: 12px; margin-bottom: 8px; background: #334155; color: white; border: 1px solid #475569; cursor: pointer; border-radius: 8px; transition: 0.2s; }
        .option-btn:hover:not(:disabled) { background: #475569; border-color: #fbbf24; }
        .correct { background: #15803d !important; }
        .incorrect { background: #b91c1c !important; }
        canvas { background: #000; border: 4px solid #1e40af; border-radius: 10px; display: block; margin: 0 auto; }
        .unlocked { background: linear-gradient(135deg, #f59e0b, #d97706) !important; color: white !important; cursor: pointer !important; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1 class="text-3xl font-black text-yellow-400">PACMAN XL: VOCABULARY EDITION</h1>
        <p>Haal 5 punten om de XL Maze te ontgrendelen!</p>
    </header>

    <div class="section">
        <h3 class="text-xl font-bold mb-4 text-blue-400">Woordentest (<span id="correct-count">0</span>/5)</h3>
        <div id="quiz-area">
            <div id="question-box" class="question-box">Klik op de knop om te starten!</div>
            <div id="options-container">
                <button class="option-btn" style="background:#10b981; text-align:center;" onclick="initQuiz()">START QUIZ</button>
            </div>
            <div id="feedback" class="h-8 text-center font-bold mt-2"></div>
            <button id="next-btn" class="option-btn mt-4" style="display:none; background:#fbbf24; color:black; text-align:center; font-weight:bold;" onclick="renderQuestion()">VOLGENDE VRAAG ➔</button>
        </div>
    </div>

    <div class="game-section section">
        <div class="flex justify-between items-center mb-4 bg-slate-900 p-3 rounded-lg border border-slate-700">
            <span class="text-yellow-400 font-bold">SCORE: <span id="game-score" class="text-white text-xl">0</span></span>
            <span class="text-red-500 font-bold">LIVES: <span id="game-lives" class="text-white text-xl">3</span></span>
            <span id="power-indicator" class="hidden text-green-400 animate-bounce">POWER-UP!</span>
        </div>
        <canvas id="gameCanvas" width="800" height="500"></canvas>
        <button id="start-game-btn" class="w-full p-4 mt-4 rounded-xl font-bold bg-slate-700 text-slate-500" disabled onclick="startGame()">SPEL VERGRENDELD</button>
    </div>
</div>

<script>
const vocabData = [
    { w: "zeer goede", c: "uitmuntende", o: ["aangename", "flinke"] },
    { w: "crèche", c: "kinderdagverblijf", o: ["gietemmer", "mensen met wie je verbonden bent"] },
    { w: "voerbakken", c: "troggen", o: ["donateurs", "filialen"] },
    { w: "ophef", c: "beroering", o: ["argumentatie", "walging"] },
    { w: "Een ... plan", c: "indrukwekkend", o: ["idioot", "gevoelig"] },
    { w: "fauteuil", c: "armstoel", o: ["leidinggevende functie", "traditioneel"] },
    { w: "correspondentie", c: "briefwisseling", o: ["armstoel", "goedkeuring"] },
    { w: "barok", c: "stijl met overdadige vormen", o: ["godsdienstuiting", "meer dan nodig"] },
    { w: "aangewakkerd", c: "feller doen branden", o: ["niet fris", "met betrekking tot"] },
    { w: ".... weer", c: "onstuimig", o: ["sober", "uitbundig"] },
    { w: "eerbied", c: "respect", o: ["plotselinge gedachte", "godsdienst"] },
    { w: "traject", c: "een afgelegde weg", o: ["paviljoen", "festival"] },
    { w: "flora", c: "plantenwereld", o: ["bodemkunde", "dierenwereld"] }
];

let activeQuestions = [], currentIdx = 0, points = 0;

function initQuiz() {
    points = 0; currentIdx = 0;
    document.getElementById('correct-count').innerText = "0";
    activeQuestions = [...vocabData].sort(() => Math.random() - 0.5);
    renderQuestion();
}

function renderQuestion() {
    if (currentIdx >= activeQuestions.length) { initQuiz(); return; }
    const q = activeQuestions[currentIdx];
    const options = [q.c, ...q.o].sort(() => Math.random() - 0.5);
    document.getElementById('question-box').innerText = `Wat betekent: "${q.w}"?`;
    document.getElementById('feedback').innerText = "";
    document.getElementById('next-btn').style.display = "none";
    const container = document.getElementById('options-container');
    container.innerHTML = "";
    options.forEach(opt => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.innerText = opt;
        btn.onclick = () => {
            document.querySelectorAll('.option-btn').forEach(b => b.disabled = true);
            if(opt === q.c) {
                btn.classList.add('correct');
                points++; document.getElementById('correct-count').innerText = points;
                if(points >= 5) {
                    const sb = document.getElementById('start-game-btn');
                    sb.disabled = false; sb.classList.add('unlocked'); sb.innerText = "START XL PACMAN";
                }
            } else { btn.classList.add('incorrect'); }
            currentIdx++; document.getElementById('next-btn').style.display = "block";
        };
        container.appendChild(btn);
    });
}

// ================= GAME LOGICA XL =================
const canvas = document.getElementById('gameCanvas'), ctx = canvas.getContext('2d');
const TILE = 25;
let gameRunning = false, score = 0, lives = 3, power = 0;
let pacman = { x: 25, y: 25, dir: 0, nextDir: 0, speed: 2.5 };
let ghosts = [];

const maze = [
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,3,1],
    [1,2,1,1,2,1,2,1,1,1,1,2,1,2,1,1,1,1,2,1,2,1,1,1,1,2,1,1,1,1,2,1],
    [1,3,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
    [1,2,1,1,2,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,2,1,1,1,2,1],
    [1,2,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,2,1,2,2,2,2,2,2,1],
    [1,1,1,1,1,1,2,1,1,1,1,1,2,1,2,1,1,1,2,1,2,1,1,1,1,1,2,1,1,1,1,1],
    [1,0,0,0,0,1,2,1,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,1,2,2,1,0,0,0,1],
    [1,1,1,1,1,1,2,1,2,1,1,1,0,0,0,0,0,0,1,1,1,2,1,2,1,1,2,1,1,1,1,1],
    [1,2,2,2,2,2,2,2,2,1,0,0,0,0,0,0,0,0,0,0,1,2,2,2,2,2,2,2,2,2,2,1],
    [1,2,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,2,1,2,1],
    [1,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,1,2,1],
    [1,2,1,1,2,1,2,1,1,1,1,2,1,2,1,1,1,1,2,1,2,1,1,1,1,2,1,1,2,1,2,1],
    [1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
    [1,2,1,1,2,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,2,1,1,1,2,1],
    [1,2,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,2,1,2,2,2,2,2,2,1],
    [1,1,1,1,1,1,2,1,1,1,1,1,2,1,2,1,1,1,2,1,2,1,1,1,1,1,2,1,1,1,1,1],
    [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
];
let curMap = [];

function draw() {
    ctx.fillStyle = "black"; ctx.fillRect(0,0,canvas.width,canvas.height);
    for(let r=0; r<curMap.length; r++) {
        for(let c=0; c<curMap[r].length; c++) {
            let x = c*TILE, y = r*TILE;
            if(curMap[r][c]===1) {
                ctx.fillStyle = "#1e40af"; ctx.roundRect ? ctx.fill(new Path2D(`M${x+2} ${y+2} h${TILE-4} v${TILE-4} h-${TILE-4} z`)) : ctx.fillRect(x+2,y+2,TILE-4,TILE-4);
            } else if(curMap[r][c]===2) {
                ctx.fillStyle = "#fbbf24"; ctx.beginPath(); ctx.arc(x+TILE/2,y+TILE/2,2,0,7); ctx.fill();
            } else if(curMap[r][c]===3) {
                ctx.fillStyle = "#fff"; ctx.beginPath(); ctx.arc(x+TILE/2,y+TILE/2,6,0,7); ctx.fill();
            }
        }
    }
    // Pacman
    ctx.fillStyle = "yellow"; ctx.beginPath();
    let mouth = Math.sin(Date.now()/100)*0.2 + 0.2;
    ctx.arc(pacman.x+TILE/2, pacman.y+TILE/2, 10, (mouth + pacman.dir*0.5)*Math.PI, (2-mouth + pacman.dir*0.5)*Math.PI);
    ctx.lineTo(pacman.x+TILE/2, pacman.y+TILE/2); ctx.fill();
    // Ghosts
    ghosts.forEach(g => {
        ctx.fillStyle = power > 0 ? "#2563eb" : g.color;
        ctx.beginPath(); ctx.arc(g.x+TILE/2, g.y+TILE/2, 10, Math.PI, 0);
        ctx.lineTo(g.x+TILE-4, g.y+TILE-4); ctx.lineTo(g.x+4, g.y+TILE-4); ctx.fill();
    });
}

function canMove(x,y,dir) {
    let nx = x, ny = y, margin = 4;
    if(dir===0) nx+=margin; if(dir===1) ny+=margin; if(dir===2) nx-=margin; if(dir===3) ny-=margin;
    let c = Math.floor((nx+TILE/2)/TILE), r = Math.floor((ny+TILE/2)/TILE);
    return curMap[r] && curMap[r][c] !== 1;
}

function loop() {
    if(!gameRunning) return;
    // Smooth turn logic
    if(pacman.dir !== pacman.nextDir) {
        if(Math.abs(pacman.x%TILE) < 4 && Math.abs(pacman.y%TILE) < 4) {
            let gx = Math.round(pacman.x/TILE)*TILE, gy = Math.round(pacman.y/TILE)*TILE;
            if(canMove(gx,gy,pacman.nextDir)) { pacman.x=gx; pacman.y=gy; pacman.dir=pacman.nextDir; }
        }
    }
    let dx=0, dy=0;
    if(pacman.dir===0) dx=pacman.speed; if(pacman.dir===1) dy=pacman.speed;
    if(pacman.dir===2) dx=-pacman.speed; if(pacman.dir===3) dy=-pacman.speed;
    if(canMove(pacman.x+dx, pacman.y+dy, pacman.dir)) { pacman.x+=dx; pacman.y+=dy; }

    let pr = Math.floor((pacman.y+TILE/2)/TILE), pc = Math.floor((pacman.x+TILE/2)/TILE);
    if(curMap[pr][pc] > 1) {
        if(curMap[pr][pc]===2) score+=10; else { score+=50; power=400; document.getElementById('power-indicator').classList.remove('hidden'); }
        curMap[pr][pc]=0;
    }
    if(power>0) { power--; if(power===0) document.getElementById('power-indicator').classList.add('hidden'); }

    ghosts.forEach(g => {
        if(Math.random()<0.02 || !canMove(g.x, g.y, g.dir)) g.dir = Math.floor(Math.random()*4);
        let gdx=0, gdy=0, gs = power>0?1:1.5;
        if(g.dir===0) gdx=gs; if(g.dir===1) gdy=gs; if(g.dir===2) gdx=-gs; if(g.dir===3) gdy=-gs;
        if(canMove(g.x+gdx, g.y+gdy, g.dir)) { g.x+=gdx; g.y+=gdy; }
        if(Math.hypot(pacman.x-g.x, pacman.y-g.y)<15) {
            if(power>0) { g.x=350; g.y=200; score+=200; }
            else { lives--; if(lives<=0) { gameRunning=false; alert("GAME OVER! Score: "+score); } else { pacman.x=TILE; pacman.y=TILE; } }
        }
    });

    document.getElementById('game-score').innerText = score;
    document.getElementById('game-lives').innerText = lives;
    draw(); requestAnimationFrame(loop);
}

function startGame() {
    curMap = maze.map(r => [...r]); score=0; lives=3; gameRunning=true;
    pacman = { x: TILE, y: TILE, dir: 0, nextDir: 0, speed: 2.5 };
    ghosts = [{x:350, y:200, color:'#ef4444', dir:0}, {x:400, y:200, color:'#ec4899', dir:2}, {x:375, y:225, color:'#06b6d4', dir:3}];
    loop();
}

window.addEventListener("keydown", e => {
    const keys = {ArrowRight:0, ArrowDown:1, ArrowLeft:2, ArrowUp:3};
    if(keys[e.key] !== undefined) { e.preventDefault(); pacman.nextDir = keys[e.key]; }
});
</script>
</body>
</html>
