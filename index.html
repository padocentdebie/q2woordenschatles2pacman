<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Justitie Woordenschatspel met Pacman Doolhof</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(to bottom, #0c1a2d, #1a2b4d);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        header {
            text-align: center;
            padding: 25px;
            background: rgba(12, 26, 45, 0.8);
            border-radius: 15px;
            border: 3px solid #2a4a7a;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            color: #ffcc00;
            margin-bottom: 10px;
            font-size: 2.8rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .subtitle {
            color: #4dccbd;
            font-size: 1.3rem;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.5;
        }
        
        .theme-badge {
            display: inline-block;
            background: #2a4a7a;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            margin-top: 15px;
            font-weight: bold;
        }
        
        .game-container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
        }
        
        .quiz-section, .pacman-section {
            flex: 1;
            min-width: 350px;
            background: rgba(12, 26, 45, 0.8);
            border-radius: 15px;
            padding: 25px;
            border: 3px solid #2a4a7a;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .section-title {
            color: #ffcc00;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #2a4a7a;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title::before {
            content: "‚öñÔ∏è";
            font-size: 1.5rem;
        }
        
        /* Quiz Styling */
        .quiz-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background: rgba(42, 74, 122, 0.3);
            padding: 15px;
            border-radius: 10px;
        }
        
        .score, .progress, .correct-needed {
            font-size: 1.2rem;
            color: #4dccbd;
        }
        
        .question-container {
            margin-bottom: 25px;
        }
        
        .question {
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: #fff;
            line-height: 1.4;
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #ffcc00;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .option {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #2a4a7a;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }
        
        .option:hover {
            background: rgba(42, 74, 122, 0.5);
            transform: translateY(-3px);
        }
        
        .option.correct {
            background: rgba(46, 204, 113, 0.3);
            border-color: #2ecc71;
        }
        
        .option.wrong {
            background: rgba(231, 76, 60, 0.3);
            border-color: #e74c3c;
        }
        
        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: #2a4a7a;
            color: white;
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
        }
        
        .feedback {
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
            font-weight: bold;
            display: none;
        }
        
        .correct-feedback {
            background: rgba(46, 204, 113, 0.2);
            border: 2px solid #2ecc71;
            color: #2ecc71;
        }
        
        .wrong-feedback {
            background: rgba(231, 76, 60, 0.2);
            border: 2px solid #e74c3c;
            color: #e74c3c;
        }
        
        .next-btn {
            background: linear-gradient(to right, #ffcc00, #ffaa00);
            color: #0c1a2d;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 10px;
            cursor: pointer;
            display: block;
            margin: 20px auto 0;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .next-btn:hover {
            background: linear-gradient(to right, #e6b800, #dd9900);
            transform: scale(1.05);
        }
        
        .next-btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Pacman Styling */
        .pacman-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background: rgba(42, 74, 122, 0.3);
            padding: 15px;
            border-radius: 10px;
        }
        
        .pacman-status, .pacman-score, .dots-collected {
            font-size: 1.2rem;
            color: #4dccbd;
        }
        
        .pacman-game-container {
            width: 100%;
            height: 450px;
            background: #000;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            border: 3px solid #2a4a7a;
        }
        
        #gameCanvas {
            display: block;
        }
        
        .pacman-instructions {
            margin-top: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .pacman-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .control-btn {
            background: #2a4a7a;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .control-btn:hover {
            background: #3a5a9a;
            transform: scale(1.05);
        }
        
        .control-btn:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
        }
        
        .game-over-message {
            text-align: center;
            font-size: 1.5rem;
            color: #ffcc00;
            margin-top: 20px;
            padding: 15px;
            background: rgba(231, 76, 60, 0.2);
            border-radius: 10px;
            border: 2px solid #e74c3c;
            display: none;
        }
        
        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
            line-height: 1.6;
        }
        
        .instructions h3 {
            color: #ffcc00;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .instructions h3::before {
            content: "üìö";
        }
        
        .instruction-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .step {
            background: rgba(42, 74, 122, 0.3);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #ffcc00;
        }
        
        .step-number {
            color: #ffcc00;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        @media (max-width: 768px) {
            .game-container {
                flex-direction: column;
            }
            
            .pacman-game-container {
                height: 350px;
            }
            
            .instruction-steps {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Justitie Woordenschatspel</h1>
            <p class="subtitle">Beantwoord 5 juridische vragen correct om Pacman te spelen. Eet witte bolletjes in het doolhof, maar pas op voor de spoken!</p>
            <div class="theme-badge">‚öñÔ∏è Thema: Recht en Justitie ‚öñÔ∏è</div>
        </header>
        
        <div class="game-container">
            <!-- Woordenschat Quiz Sectie -->
            <section class="quiz-section">
                <h2 class="section-title">Justitie Woordenschat</h2>
                
                <div class="quiz-info">
                    <div class="score">Correct: <span id="correct-count">0</span>/5</div>
                    <div class="progress">Vraag: <span id="current-question">1</span>/25</div>
                    <div class="correct-needed">Nodig voor Pacman: <span id="needed-count">5</span></div>
                </div>
                
                <div class="question-container">
                    <div class="question" id="question-text">Laden...</div>
                    
                    <div class="options" id="options-container">
                        <!-- Opties worden hier ingevoegd via JavaScript -->
                    </div>
                    
                    <div class="feedback" id="feedback"></div>
                    
                    <button class="next-btn" id="next-btn" disabled>Volgende Vraag</button>
                </div>
            </section>
            
            <!-- Pacman Spel Sectie -->
            <section class="pacman-section">
                <h2 class="section-title">Pacman Doolhof</h2>
                
                <div class="pacman-info">
                    <div class="pacman-status">Status: <span id="pacman-status">Locked</span></div>
                    <div class="pacman-score">Score: <span id="pacman-score">0</span></div>
                    <div class="dots-collected">Bolletjes: <span id="dots-counter">0</span>/<span id="dots-total">0</span></div>
                </div>
                
                <div class="pacman-game-container">
                    <canvas id="gameCanvas" width="600" height="450"></canvas>
                </div>
                
                <div class="pacman-controls">
                    <button class="control-btn" id="start-btn" disabled>Start Pacman</button>
                    <button class="control-btn" id="reset-btn">Reset Spel</button>
                </div>
                
                <div class="game-over-message" id="game-over-message">
                    Pacman is gepakt! Beantwoord 5 vragen correct om opnieuw te spelen.
                </div>
                
                <div class="pacman-instructions">
                    <p><strong>Besturing:</strong> Gebruik pijltjestoetsen om Pacman te bewegen. Eet alle witte bolletjes om punten te scoren. De spoken dwalen door het doolhof en jagen op Pacman!</p>
                </div>
            </section>
        </div>
        
        <div class="instructions">
            <h3>Hoe werkt dit justitie-spel?</h3>
            <div class="instruction-steps">
                <div class="step">
                    <div class="step-number">Stap 1: Woordenschat Quiz</div>
                    <p>Beantwoord 5 juridische vragen correct om Pacman te ontgrendelen. Je hebt 25 vragen tot je beschikking.</p>
                </div>
                <div class="step">
                    <div class="step-number">Stap 2: Pacman Spelen</div>
                    <p>Als je 5 vragen correct hebt, kun je Pacman spelen. Beweeg door het doolhof en eet alle witte bolletjes.</p>
                </div>
                <div class="step">
                    <div class="step-number">Stap 3: Spoken Ontwijken</div>
                    <p>De spoken dwalen door het doolhof en jagen op Pacman. Als je gepakt wordt, moet je opnieuw 5 vragen correct beantwoorden.</p>
                </div>
                <div class="step">
                    <div class="step-number">Stap 4: Opnieuw Beginnen</div>
                    <p>Na elk Pacman-spel (of wanneer je gepakt wordt) moet je weer 5 vragen correct beantwoorden om verder te kunnen spelen.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Woordenschat vragen met thema Justitie - 25 vragen
        const vocabularyQuestions = [
            {
                question: "Wat betekent 'jurisprudentie'?",
                options: ["Rechtspraak en rechterlijke uitspraken", "Wetenschap van het recht", "Rechtsbijstand", "Gerechtelijke procedure"],
                correct: 0,
                explanation: "Jurisprudentie verwijst naar het geheel van rechterlijke uitspraken die richting geven aan de rechtspleging."
            },
            {
                question: "Wat is een 'civiele rechtszaak'?",
                options: ["Een strafzaak", "Een geschil tussen burgers onderling", "Een constitutionele zaak", "Een administratieve zaak"],
                correct: 1,
                explanation: "Een civiele rechtszaak betreft geschillen tussen burgers of bedrijven, niet tussen staat en burger."
            },
            {
                question: "Wat betekent 'proces-verbaal'?",
                options: ["Een gerechtelijk vonnis", "Een officieel verslag van een gebeurtenis", "Een getuigenverklaring", "Een pleidooi"],
                correct: 1,
                explanation: "Een proces-verbaal is een officieel schriftelijk verslag, vaak opgemaakt door politie of andere autoriteiten."
            },
            {
                question: "Wat is een 'getuige-deskundige'?",
                options: ["Een getuige van het misdrijf", "Een rechter", "Een expert die de rechter adviseert", "Een officier van justitie"],
                correct: 2,
                explanation: "Een getuige-deskundige is een expert die op basis van specifieke kennis de rechter adviseert over technische aspecten van een zaak."
            },
            {
                question: "Wat betekent 'cassatie'?",
                options: ["Eerste aanleg", "Hoger beroep", "Beroep bij de Hoge Raad", "Bemiddeling"],
                correct: 2,
                explanation: "Cassatie is beroep bij de Hoge Raad tegen een uitspraak van een lagere rechter, meestal vanwege procedurefouten."
            },
            {
                question: "Wat is een 'dagvaarding'?",
                options: ["Een uitnodiging voor een hoorzitting", "Een offici√´le oproeping voor de rechtbank", "Een vonnis", "Een verzoekschrift"],
                correct: 1,
                explanation: "Een dagvaarding is een officieel document waarmee iemand wordt opgeroepen om voor de rechter te verschijnen."
            },
            {
                question: "Wat betekent 'voorlopige hechtenis'?",
                options: ["Huisarrest", "Gevangenisstraf na vonnis", "Gevangenhouding voor de rechtszaak", "Voorwaardelijke straf"],
                correct: 2,
                explanation: "Voorlopige hechtenis is gevangenhouding van een verdachte tijdens het onderzoek, voorafgaand aan de rechtszaak."
            },
            {
                question: "Wat is een 'wrakingsprocedure'?",
                options: ["Procedure om een rechter te laten vervangen", "Procedure om een zaak te laten vervallen", "Procedure om in hoger beroep te gaan", "Procedure om getuigen te horen"],
                correct: 0,
                explanation: "Een wrakingsprocedure is een verzoek om een rechter niet te laten zitting nemen vanwege vermeende partijdigheid."
            },
            {
                question: "Wat betekent 'sepot'?",
                options: ["Opschorting van de rechtszaak", "Niet-ontvankelijk verklaring", "Strafbaarstelling", "Beslissing om niet te vervolgen"],
                correct: 3,
                explanation: "Sepot is het besluit van het Openbaar Ministerie om een strafzaak niet te vervolgen."
            },
            {
                question: "Wat is een 'curator'?",
                options: ["Een rechter", "Een bewindvoerder bij faillissement", "Een advocaat", "Een notaris"],
                correct: 1,
                explanation: "Een curator is een door de rechter aangestelde bewindvoerder die een failliete boedel beheert."
            },
            {
                question: "Wat betekent 'arbitrage'?",
                options: ["Bemiddeling door een rechter", "Geschilbeslechting door een onafhankelijke arbiter", "Een vorm van hoger beroep", "Een strafrechtelijke procedure"],
                correct: 1,
                explanation: "Arbitrage is een vorm van geschilbeslechting waarbij partijen hun conflict voorleggen aan een onafhankelijke arbiter in plaats van aan een rechter."
            },
            {
                question: "Wat is 'exhibitie' in juridische context?",
                options: ["Tentoonstelling van bewijs", "Overlegging van stukken", "Getuigenverhoor", "Pleidooi"],
                correct: 1,
                explanation: "Exhibitie is het overleggen van stukken ter ondersteuning van een stelling in een rechtszaak."
            },
            {
                question: "Wat betekent 'verstek'?",
                options: ["Uitspraak zonder zitting", "Vonnis bij afwezigheid van partij", "Voorlopige voorziening", "Schikking"],
                correct: 1,
                explanation: "Verstek wordt uitgesproken wanneer een partij niet op de rechtszitting verschijnt, ondanks behoorlijke oproeping."
            },
            {
                question: "Wat is 'ontbinding van overeenkomst'?",
                options: ["Aanpassing van contract", "Be√´indiging van contractuele relatie", "Schorsing van overeenkomst", "Heronderhandeling van contract"],
                correct: 1,
                explanation: "Ontbinding van overeenkomst betekent het be√´indigen van een contract met terugwerkende kracht."
            },
            {
                question: "Wat betekent 'prejudici√´le vraag'?",
                options: ["Vraag voor de aanvang van de zaak", "Vraag aan hogere rechter voor beslissing", "Vraag aan getuige", "Vraag in hoger beroep"],
                correct: 1,
                explanation: "Een prejudici√´le vraag is een vraag die een nationale rechter voorlegt aan het Europese Hof van Justitie over de uitleg van EU-recht."
            },
            {
                question: "Wat is 'bewijsindicatie'?",
                options: ["Volledig bewijs", "Sterke aanwijzing voor waarheid", "Getuigenverklaring", "Documentair bewijs"],
                correct: 1,
                explanation: "Bewijsindicatie is een aanwijzing die sterk suggereert dat iets waar is, maar geen volledig bewijs vormt."
            },
            {
                question: "Wat betekent 'restitutie'?",
                options: ["Schadevergoeding", "Teruggave van onrechtmatig verkregen goed", "Boete", "Schikking"],
                correct: 1,
                explanation: "Restitutie is het herstel van de oorspronkelijke situatie door teruggave van onrechtmatig verkregen goederen."
            },
            {
                question: "Wat is een 'conclusie van repliek'?",
                options: ["Eindpleidooi", "Antwoord op conclusie van antwoord", "Verweerschrift", "Dagvaarding"],
                correct: 1,
                explanation: "De conclusie van repliek is het schriftelijk antwoord van de eiser op het verweerschrift van de gedaagde."
            },
            {
                question: "Wat betekent 'detentie'?",
                options: ["Huisarrest", "Gevangenschap", "Voorwaardelijke straf", "Taakstraf"],
                correct: 1,
                explanation: "Detentie betekent gevangenschap, meestal in het kader van een strafrechtelijke sanctie."
            },
            {
                question: "Wat is 'executoriaal beslag'?",
                options: ["Beslag om schuld te innen", "Voorlopig beslag", "Conservatoir beslag", "Beslag op onroerend goed"],
                correct: 0,
                explanation: "Executoriaal beslag is beslag dat wordt gelegd om een vordering te innen na een vonnis."
            },
            {
                question: "Wat betekent 'incompetentie' van een rechter?",
                options: ["Onbekwaamheid", "Gebrek aan bevoegdheid", "Partijdigheid", "Onwetendheid"],
                correct: 1,
                explanation: "Incompetentie betekent dat een rechter niet bevoegd is om over een bepaalde zaak te oordelen."
            },
            {
                question: "Wat is 'kort geding'?",
                options: ["Versnelde procedure", "Kleine claims procedure", "Bodemprocedure", "Hoger beroep"],
                correct: 0,
                explanation: "Een kort geding is een spoedprocedure voor dringende zaken, waarbij een voorzieningenrechter snel een beslissing neemt."
            },
            {
                question: "Wat betekent 'non-disclosure agreement' (NDA)?",
                options: ["Arbeidsovereenkomst", "Geheimhoudingsovereenkomst", "Aankoopovereenkomst", "Bemiddelingsovereenkomst"],
                correct: 1,
                explanation: "Een NDA is een overeenkomst waarbij partijen afspreken bepaalde informatie geheim te houden."
            },
            {
                question: "Wat is 'precedentwerking'?",
                options: ["Invloed van eerdere uitspraken", "Werking van nieuwe wet", "Effect van getuigenverklaring", "Impact van bewijs"],
                correct: 0,
                explanation: "Precedentwerking is de invloed die eerdere rechterlijke uitspraken hebben op latere soortgelijke zaken."
            },
            {
                question: "Wat betekent 'verjaring'?",
                options: ["Verval van strafbaarheid door tijdsverloop", "Vervanging van straf", "Vermindering van straf", "Opschorting van straf"],
                correct: 0,
                explanation: "Verjaring is het verval van de mogelijkheid tot vervolging of tenuitvoerlegging van een straf door verloop van tijd."
            },
            {
                question: "Wat is een 'procesvertegenwoordiger'?",
                options: ["Een rechter", "Een advocaat die een partij vertegenwoordigt", "Een getuige", "Een gerechtsdeurwaarder"],
                correct: 1,
                explanation: "Een procesvertegenwoordiger is een advocaat die een partij vertegenwoordigt in een rechtszaak."
            }
        ];

        // Game state
        let currentQuestion = 0;
        let correctAnswers = 0;
        let neededForPacman = 5;
        let pacmanScore = 0;
        let pacmanUnlocked = false;
        let pacmanGameActive = false;
        let pacmanGameOver = false;

        // DOM elementen
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const correctCountElement = document.getElementById('correct-count');
        const currentQuestionElement = document.getElementById('current-question');
        const neededCountElement = document.getElementById('needed-count');
        const feedbackElement = document.getElementById('feedback');
        const nextButton = document.getElementById('next-btn');
        const pacmanStatusElement = document.getElementById('pacman-status');
        const pacmanScoreElement = document.getElementById('pacman-score');
        const dotsCounter = document.getElementById('dots-counter');
        const dotsTotalElement = document.getElementById('dots-total');
        const startButton = document.getElementById('start-btn');
        const resetButton = document.getElementById('reset-btn');
        const gameOverMessage = document.getElementById('game-over-message');

        // Initialisatie functie
        function init() {
            console.log("Initialisatie gestart...");
            console.log("Aantal vragen:", vocabularyQuestions.length);
            
            correctCountElement.textContent = correctAnswers;
            neededCountElement.textContent = neededForPacman;
            currentQuestionElement.textContent = currentQuestion + 1;
            
            updatePacmanStatus();
            loadQuestion();
            
            // Event listeners
            nextButton.addEventListener('click', nextQuestion);
            startButton.addEventListener('click', startPacman);
            resetButton.addEventListener('click', resetPacman);
            
            // Keyboard controls voor Pacman
            document.addEventListener('keydown', handleKeyDown);
            document.addEventListener('keyup', handleKeyUp);
            
            console.log("Initialisatie voltooid!");
        }

        // Update Pacman status
        function updatePacmanStatus() {
            if (pacmanUnlocked) {
                pacmanStatusElement.textContent = "Unlocked";
                pacmanStatusElement.style.color = "#2ecc71";
                startButton.disabled = false;
            } else {
                pacmanStatusElement.textContent = "Locked (" + correctAnswers + "/" + neededForPacman + ")";
                pacmanStatusElement.style.color = "#e74c3c";
                startButton.disabled = true;
            }
            
            if (pacmanGameOver) {
                pacmanStatusElement.textContent = "Game Over";
                pacmanStatusElement.style.color = "#e74c3c";
                startButton.disabled = true;
            }
            
            pacmanScoreElement.textContent = pacmanScore;
        }

        // Vraag laden
        function loadQuestion() {
            console.log("Laden vraag", currentQuestion + 1, "van", vocabularyQuestions.length);
            
            if (currentQuestion >= vocabularyQuestions.length) {
                console.error("Vraag index buiten bereik!");
                return;
            }
            
            const question = vocabularyQuestions[currentQuestion];
            questionText.textContent = `${currentQuestion + 1}. ${question.question}`;
            
            optionsContainer.innerHTML = '';
            const letters = ['A', 'B', 'C', 'D'];
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.classList.add('option');
                optionElement.innerHTML = `
                    <div class="option-letter">${letters[index]}</div>
                    <div class="option-text">${option}</div>
                `;
                optionElement.dataset.index = index;
                optionElement.addEventListener('click', selectOption);
                optionsContainer.appendChild(optionElement);
            });
            
            currentQuestionElement.textContent = currentQuestion + 1;
            feedbackElement.style.display = 'none';
            nextButton.disabled = true;
            
            // Update benodigde aantal voor Pacman
            neededCountElement.textContent = neededForPacman - correctAnswers;
            
            console.log("Vraag geladen:", question.question.substring(0, 50) + "...");
        }

        // Optie selecteren
        function selectOption(e) {
            if (nextButton.disabled === false) return; // Voorkom meerdere selecties
            
            const optionElement = e.target.closest('.option');
            if (!optionElement) return;
            
            const selectedOption = parseInt(optionElement.dataset.index);
            const correctOption = vocabularyQuestions[currentQuestion].correct;
            const options = document.querySelectorAll('.option');
            
            console.log("Geselecteerd antwoord:", selectedOption, "Correct antwoord:", correctOption);
            
            // Toon feedback
            if (selectedOption === correctOption) {
                correctAnswers++;
                correctCountElement.textContent = correctAnswers;
                
                feedbackElement.innerHTML = `<strong>Goed gedaan!</strong><br>${vocabularyQuestions[currentQuestion].explanation}`;
                feedbackElement.className = "feedback correct-feedback";
                
                // Controleer of Pacman nu unlocked is
                if (correctAnswers >= neededForPacman && !pacmanUnlocked) {
                    pacmanUnlocked = true;
                    pacmanGameOver = false;
                    gameOverMessage.style.display = 'none';
                    updatePacmanStatus();
                    feedbackElement.innerHTML += `<br><br><strong>Pacman is nu ontgrendeld! Je kunt Pacman spelen.</strong>`;
                }
                
                // Markeer correct antwoord
                options[selectedOption].classList.add('correct');
            } else {
                feedbackElement.innerHTML = `<strong>Helaas!</strong><br>${vocabularyQuestions[currentQuestion].explanation}<br><br>Het juiste antwoord was: ${vocabularyQuestions[currentQuestion].options[correctOption]}`;
                feedbackElement.className = "feedback wrong-feedback";
                
                // Markeer fout en correct antwoord
                options[selectedOption].classList.add('wrong');
                options[correctOption].classList.add('correct');
            }
            
            feedbackElement.style.display = 'block';
            nextButton.disabled = false;
        }

        // Volgende vraag
        function nextQuestion() {
            currentQuestion++;
            
            if (currentQuestion < vocabularyQuestions.length) {
                loadQuestion();
            } else {
                // Einde van de quiz, reset vragen maar behoud score
                currentQuestion = 0;
                loadQuestion();
                
                // Toon bericht
                const endMessage = document.createElement('div');
                endMessage.className = "feedback correct-feedback";
                endMessage.innerHTML = `<strong>Alle vragen zijn doorlopen!</strong><br>De vragen worden nu herhaald.<br><br>Correcte antwoorden: ${correctAnswers}`;
                endMessage.style.display = 'block';
                feedbackElement.parentNode.insertBefore(endMessage, feedbackElement.nextSibling);
            }
        }

        // Pacman Game Code met Doolhof
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Maze layout - een doolhof met muren
        const maze = [
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,0,1],
            [1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1],
            [1,0,1,0,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1],
            [1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1],
            [1,0,1,0,1,1,1,1,0,1,1,1,0,1,1,1,1,0,1,1],
            [1,0,1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,1],
            [1,0,1,1,1,0,1,1,0,1,1,1,0,1,1,0,1,1,1,1],
            [1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
        ];

        // Game variabelen
        let pacman = {
            x: 30,
            y: 30,
            radius: 12,
            speed: 2.5,
            direction: { x: 0, y: 0 },
            nextDirection: { x: 0, y: 0 },
            mouthOpen: 0,
            mouthSpeed: 0.1
        };

        let dots = [];
        let ghosts = [];
        let dotsCollected = 0;
        let dotsTotal = 0;
        let gameRunning = false;
        let keys = {};
        const cellSize = 30;

        // Initialiseer Pacman spel
        function initPacman() {
            // Reset Pacman positie
            pacman.x = 30;
            pacman.y = 30;
            pacman.direction = { x: 0, y: 0 };
            pacman.nextDirection = { x: 0, y: 0 };
            
            // Bereken doolhof afmetingen
            const mazeWidth = maze[0].length;
            const mazeHeight = maze.length;
            
            // Maak dots op basis van maze
            dots = [];
            dotsTotal = 0;
            
            for (let y = 0; y < mazeHeight; y++) {
                for (let x = 0; x < mazeWidth; x++) {
                    const cellX = x * cellSize + cellSize/2;
                    const cellY = y * cellSize + cellSize/2;
                    
                    if (maze[y][x] === 0) {
                        // Witte bolletje
                        dots.push({
                            x: cellX,
                            y: cellY,
                            radius: 4,
                            collected: false
                        });
                        dotsTotal++;
                    }
                }
            }
            
            dotsCollected = 0;
            dotsCounter.textContent = dotsCollected;
            dotsTotalElement.textContent = dotsTotal;
            
            // Maak ghosts (spoken)
            ghosts = [];
            const ghostColors = ['#FF0000', '#00FFFF', '#FF00FF', '#FFA500'];
            const ghostNames = ['Blinky', 'Inky', 'Pinky', 'Clyde'];
            
            // Plaats ghosts op verschillende startposities
            const ghostStartPositions = [
                {x: canvas.width - 30, y: 30},
                {x: 30, y: canvas.height - 30},
                {x: canvas.width - 30, y: canvas.height - 30},
                {x: canvas.width/2, y: canvas.height/2}
            ];
            
            for (let i = 0; i < 4; i++) {
                ghosts.push({
                    x: ghostStartPositions[i].x,
                    y: ghostStartPositions[i].y,
                    radius: 12,
                    speed: 1.5 + Math.random() * 0.5,
                    direction: { x: Math.random() > 0.5 ? 1 : -1, y: Math.random() > 0.5 ? 1 : -1 },
                    color: ghostColors[i],
                    name: ghostNames[i]
                });
            }
            
            console.log("Pacman spel ge√Ønitialiseerd met", dotsTotal, "bolletjes en", ghosts.length, "spoken");
        }

        // Teken doolhof
        function drawMaze() {
            const mazeWidth = maze[0].length;
            const mazeHeight = maze.length;
            
            for (let y = 0; y < mazeHeight; y++) {
                for (let x = 0; x < mazeWidth; x++) {
                    const cellX = x * cellSize;
                    const cellY = y * cellSize;
                    
                    if (maze[y][x] === 1) {
                        // Muur
                        ctx.fillStyle = '#1a3a8f';
                        ctx.fillRect(cellX, cellY, cellSize, cellSize);
                        
                        ctx.strokeStyle = '#0c1a2d';
                        ctx.lineWidth = 2;
                        ctx.strokeRect(cellX, cellY, cellSize, cellSize);
                    }
                }
            }
        }

        // Controleer of positie een muur is
        function isWall(x, y) {
            const gridX = Math.floor(x / cellSize);
            const gridY = Math.floor(y / cellSize);
            
            if (gridX < 0 || gridX >= maze[0].length || gridY < 0 || gridY >= maze.length) {
                return true;
            }
            
            return maze[gridY][gridX] === 1;
        }

        // Teken Pacman
        function drawPacman() {
            ctx.save();
            ctx.translate(pacman.x, pacman.y);
            
            // Draai Pacman in de juiste richting
            let angle = 0;
            if (pacman.direction.x === 1) angle = 0;
            else if (pacman.direction.x === -1) angle = Math.PI;
            else if (pacman.direction.y === 1) angle = Math.PI / 2;
            else if (pacman.direction.y === -1) angle = 3 * Math.PI / 2;
            
            ctx.rotate(angle);
            
            // Teken Pacman lichaam
            ctx.fillStyle = '#FFCC00';
            ctx.beginPath();
            ctx.arc(0, 0, pacman.radius, pacman.mouthOpen, 2 * Math.PI - pacman.mouthOpen);
            ctx.lineTo(0, 0);
            ctx.fill();
            
            // Teken oog
            ctx.fillStyle = '#000';
            ctx.beginPath();
            ctx.arc(4, -4, 2, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.restore();
        }

        // Teken dots
        function drawDots() {
            dots.forEach(dot => {
                if (!dot.collected) {
                    ctx.fillStyle = '#FFFFFF';
                    ctx.beginPath();
                    ctx.arc(dot.x, dot.y, dot.radius, 0, 2 * Math.PI);
                    ctx.fill();
                }
            });
        }

        // Teken ghosts
        function drawGhosts() {
            ghosts.forEach(ghost => {
                // Teken ghost lichaam
                ctx.fillStyle = ghost.color;
                
                // Rond lichaam
                ctx.beginPath();
                ctx.arc(ghost.x, ghost.y, ghost.radius, Math.PI, 2 * Math.PI);
                ctx.fill();
                
                // Golvende onderkant
                ctx.beginPath();
                ctx.moveTo(ghost.x - ghost.radius, ghost.y);
                for (let i = 0; i < 5; i++) {
                    const x = ghost.x - ghost.radius + (i * ghost.radius * 2) / 4;
                    const y = ghost.y + Math.sin(Date.now() / 200 + i) * 3;
                    ctx.lineTo(x, y);
                }
                ctx.lineTo(ghost.x + ghost.radius, ghost.y);
                ctx.fill();
                
                // Teken ghost ogen
                ctx.fillStyle = '#FFFFFF';
                ctx.beginPath();
                ctx.arc(ghost.x - 4, ghost.y - 4, 4, 0, Math.PI * 2);
                ctx.arc(ghost.x + 4, ghost.y - 4, 4, 0, Math.PI * 2);
                ctx.fill();
                
                // Teken ghost pupillen
                ctx.fillStyle = '#0000FF';
                ctx.beginPath();
                const pupilOffsetX = ghost.direction.x * 2;
                const pupilOffsetY = ghost.direction.y * 2;
                ctx.arc(ghost.x - 4 + pupilOffsetX, ghost.y - 4 + pupilOffsetY, 2, 0, Math.PI * 2);
                ctx.arc(ghost.x + 4 + pupilOffsetX, ghost.y - 4 + pupilOffsetY, 2, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        // Update spel
        function update() {
            // Update Pacman positie
            if (pacman.nextDirection.x !== 0 || pacman.nextDirection.y !== 0) {
                const nextX = pacman.x + pacman.nextDirection.x * pacman.speed;
                const nextY = pacman.y + pacman.nextDirection.y * pacman.speed;
                
                if (!isWall(nextX, pacman.y)) {
                    pacman.direction.x = pacman.nextDirection.x;
                    pacman.direction.y = 0;
                } else if (!isWall(pacman.x, nextY)) {
                    pacman.direction.x = 0;
                    pacman.direction.y = pacman.nextDirection.y;
                }
            }
            
            const nextX = pacman.x + pacman.direction.x * pacman.speed;
            const nextY = pacman.y + pacman.direction.y * pacman.speed;
            
            if (!isWall(nextX, nextY)) {
                pacman.x = nextX;
                pacman.y = nextY;
            }
            
            // Houd Pacman binnen canvas
            if (pacman.x < pacman.radius) pacman.x = pacman.radius;
            if (pacman.x > canvas.width - pacman.radius) pacman.x = canvas.width - pacman.radius;
            if (pacman.y < pacman.radius) pacman.y = pacman.radius;
            if (pacman.y > canvas.height - pacman.radius) pacman.y = canvas.height - pacman.radius;
            
            // Update Pacman mond animatie
            pacman.mouthOpen += pacman.mouthSpeed;
            if (pacman.mouthOpen > 0.7 || pacman.mouthOpen < 0) {
                pacman.mouthSpeed = -pacman.mouthSpeed;
            }
            
            // Controleer dot collectie
            dots.forEach(dot => {
                if (!dot.collected) {
                    const dx = pacman.x - dot.x;
                    const dy = pacman.y - dot.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < pacman.radius + dot.radius) {
                        dot.collected = true;
                        dotsCollected++;
                        pacmanScore += 10;
                        dotsCounter.textContent = dotsCollected;
                        pacmanScoreElement.textContent = pacmanScore;
                    }
                }
            });
            
            // Update ghosts
            ghosts.forEach(ghost => {
                // Ghost beweging met eenvoudige AI
                if (Math.random() < 0.02 || isWall(ghost.x + ghost.direction.x * ghost.speed, ghost.y + ghost.direction.y * ghost.speed)) {
                    const directions = [
                        { x: 1, y: 0 },
                        { x: -1, y: 0 },
                        { x: 0, y: 1 },
                        { x: 0, y: -1 }
                    ];
                    
                    // Filter geldige richtingen
                    const validDirections = directions.filter(dir => {
                        return !isWall(ghost.x + dir.x * ghost.speed, ghost.y + dir.y * ghost.speed);
                    });
                    
                    if (validDirections.length > 0) {
                        // Jaag Pacman na
                        const dx = pacman.x - ghost.x;
                        const dy = pacman.y - ghost.y;
                        
                        // Kies richting die Pacman het dichtst benadert
                        let bestDirection = validDirections[0];
                        let bestScore = -Infinity;
                        
                        validDirections.forEach(dir => {
                            const score = dir.x * dx + dir.y * dy;
                            if (score > bestScore) {
                                bestScore = score;
                                bestDirection = dir;
                            }
                        });
                        
                        ghost.direction = bestDirection;
                    }
                }
                
                // Beweeg ghost
                const nextGhostX = ghost.x + ghost.direction.x * ghost.speed;
                const nextGhostY = ghost.y + ghost.direction.y * ghost.speed;
                
                if (!isWall(nextGhostX, nextGhostY)) {
                    ghost.x = nextGhostX;
                    ghost.y = nextGhostY;
                }
                
                // Controleer botsing met Pacman
                const dx = pacman.x - ghost.x;
                const dy = pacman.y - ghost.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < pacman.radius + ghost.radius) {
                    // Pacman is gepakt!
                    pacmanGameOver = true;
                    pacmanUnlocked = false;
                    correctAnswers = 0;
                    correctCountElement.textContent = correctAnswers;
                    gameRunning = false;
                    gameOverMessage.style.display = 'block';
                    updatePacmanStatus();
                    
                    // Toon game over bericht
                    ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    
                    ctx.fillStyle = '#e74c3c';
                    ctx.font = '30px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('Pacman is gepakt!', canvas.width / 2, canvas.height / 2 - 30);
                    
                    ctx.fillStyle = '#ffcc00';
                    ctx.font = '20px Arial';
                    ctx.fillText('Beantwoord 5 vragen correct om opnieuw te spelen', canvas.width / 2, canvas.height / 2 + 20);
                }
            });
            
            // Controleer of alle bolletjes zijn opgegeten
            if (dotsCollected >= dotsTotal) {
                gameRunning = false;
                pacmanUnlocked = false;
                correctAnswers = 0;
                correctCountElement.textContent = correctAnswers;
                updatePacmanStatus();
                
                // Toon succesbericht
                ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.fillStyle = '#2ecc71';
                ctx.font = '30px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Gefeliciteerd!', canvas.width / 2, canvas.height / 2 - 30);
                
                ctx.fillStyle = '#ffcc00';
                ctx.font = '20px Arial';
                ctx.fillText(`Je hebt alle ${dotsTotal} bolletjes opgegeten!`, canvas.width / 2, canvas.height / 2 + 10);
                ctx.fillText('Score: ' + pacmanScore, canvas.width / 2, canvas.height / 2 + 40);
                ctx.fillText('Beantwoord 5 vragen voor een nieuw Pacman-spel', canvas.width / 2, canvas.height / 2 + 70);
            }
        }

        // Teken alles
        function draw() {
            // Wis canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Teken achtergrond
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Teken game elementen
            drawMaze();
            drawDots();
            drawGhosts();
            drawPacman();
            
            // Teken score
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '16px Arial';
            ctx.fillText(`Score: ${pacmanScore}`, 10, 20);
            ctx.fillText(`Bolletjes: ${dotsCollected}/${dotsTotal}`, 10, 40);
            
            // Teken instructies als het spel niet actief is en niet game over
            if (!gameRunning && !pacmanGameOver && dotsCollected < dotsTotal) {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.fillStyle = '#FFCC00';
                ctx.font = '24px Arial';
                ctx.textAlign = 'center';
                
                if (pacmanUnlocked) {
                    ctx.fillText('Klik op "Start Pacman" om te spelen!', canvas.width / 2, canvas.height / 2);
                } else {
                    ctx.fillText('Beantwoord 5 vragen correct om Pacman te spelen!', canvas.width / 2, canvas.height / 2);
                }
                
                ctx.fillStyle = '#FFFFFF';
                ctx.font = '16px Arial';
                ctx.fillText('Gebruik pijltjestoetsen om Pacman te besturen', canvas.width / 2, canvas.height / 2 + 40);
            }
        }

        // Game loop
        function gameLoop() {
            if (gameRunning) {
                update();
            }
            draw();
            
            requestAnimationFrame(gameLoop);
        }

        // Start Pacman spel
        function startPacman() {
            if (!pacmanUnlocked) {
                alert('Beantwoord eerst 5 juridische vragen correct om Pacman te kunnen spelen!');
                return;
            }
            
            if (pacmanGameOver) {
                alert('Pacman is gepakt! Beantwoord 5 vragen correct om opnieuw te spelen.');
                return;
            }
            
            gameRunning = !gameRunning;
            startButton.textContent = gameRunning ? "Pauzeer Pacman" : "Hervat Pacman";
            
            if (gameRunning) {
                gameOverMessage.style.display = 'none';
            }
        }

        // Reset Pacman spel
        function resetPacman() {
            initPacman();
            pacmanScore = 0;
            pacmanScoreElement.textContent = pacmanScore;
            gameRunning = false;
            pacmanGameOver = false;
            startButton.textContent = "Start Pacman";
            gameOverMessage.style.display = 'none';
            updatePacmanStatus();
        }

        // Toetsenbord besturing
        function handleKeyDown(e) {
            keys[e.key] = true;
            
            if (!gameRunning) return;
            
            // Stel Pacman richting in op basis van toetsen
            if (keys['ArrowUp'] || keys['w'] || keys['W']) {
                pacman.nextDirection = { x: 0, y: -1 };
            } else if (keys['ArrowDown'] || keys['s'] || keys['S']) {
                pacman.nextDirection = { x: 0, y: 1 };
            } else if (keys['ArrowLeft'] || keys['a'] || keys['A']) {
                pacman.nextDirection = { x: -1, y: 0 };
            } else if (keys['ArrowRight'] || keys['d'] || keys['D']) {
                pacman.nextDirection = { x: 1, y: 0 };
            }
        }

        function handleKeyUp(e) {
            keys[e.key] = false;
        }

        // Start alles wanneer de pagina geladen is
        document.addEventListener('DOMContentLoaded', function() {
            console.log("DOM geladen, start initialisatie...");
            init();
            initPacman();
            gameLoop();
            console.log("Spel is klaar voor gebruik!");
        });
    </script>
</body>
</html>
