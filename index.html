// ==================== QUIZ LOGICA ====================
        function loadQuestion() {
            if (vocabularyQuestions.length === 0) {
                questionBox.textContent = "Klik op 'Vragen Genereren' om te beginnen";
                optionsContainer.innerHTML = '';
                return;
            }
            
            const question = vocabularyQuestions[currentQuestionIndex];
            questionBox.textContent = `${currentQuestionIndex + 1}. ${question.question}`;
            
            optionsContainer.innerHTML = '';
            const letters = ['A', 'B', 'C', 'D'];
            
            question.options.forEach((option, index) => {
                const optionBtn = document.createElement('button');
                optionBtn.className = 'option-btn';
                optionBtn.innerHTML = `
                    <div class="option-letter">${letters[index]}</div>
                    <div class="option-text">${option}</div>
                `;
                optionBtn.dataset.index = index;
                optionBtn.addEventListener('click', () => selectAnswer(index));
                optionsContainer.appendChild(optionBtn);
            });
            
            currentQuestionElement.textContent = currentQuestionIndex + 1;
            feedbackElement.style.display = 'none';
            nextBtn.disabled = true;
            updateStartGameButton();
        }

        function selectAnswer(selectedIndex) {
            const question = vocabularyQuestions[currentQuestionIndex];
            const optionButtons = document.querySelectorAll('.option-btn');
            
            // Voorkom dubbel klikken
            optionButtons.forEach(btn => btn.style.pointerEvents = 'none');

            // Toon feedback
            if (selectedIndex === question.correct) {
                correctAnswers++;
                correctCountElement.textContent = correctAnswers;
                optionButtons[selectedIndex].classList.add('correct');
                feedbackElement.textContent = "Correct! " + question.explanation;
                feedbackElement.className = 'feedback correct';
            } else {
                optionButtons[selectedIndex].classList.add('incorrect');
                optionButtons[question.correct].classList.add('correct');
                feedbackElement.textContent = "Helaas, dat is niet juist.";
                feedbackElement.className = 'feedback incorrect';
            }

            feedbackElement.style.display = 'block';
            nextBtn.disabled = false;

            // CHECK: Is het spel nu ontgrendeld?
            if (correctAnswers >= 5) {
                gameUnlocked = true;
                startGameBtn.classList.add('unlocked-glow'); // Optionele visuele hint
            }
            updateStartGameButton();
        }

        // ==================== EVENT LISTENERS ====================
        addWordBtn.addEventListener('click', addWord);
        generateQuestionsBtn.addEventListener('click', generateQuestions);
        
        nextBtn.addEventListener('click', () => {
            currentQuestionIndex++;
            if (currentQuestionIndex < vocabularyQuestions.length) {
                loadQuestion();
            } else {
                questionBox.textContent = "Quiz voltooid! Je hebt " + correctAnswers + " vragen goed beantwoord.";
                optionsContainer.innerHTML = '';
                nextBtn.disabled = true;
            }
        });

        startGameBtn.addEventListener('click', () => {
            if (gameUnlocked) {
                alert("Game Start! Gebruik de pijltjestoetsen.");
                initGame(); // Start de Pacman engine
                document.getElementById('gameCanvas').focus();
            }
        });

        // Initialiseer de lijst bij opstarten
        updateWordList();

        // ==================== PACMAN MINI-ENGINE (BASIC) ====================
        function initGame() {
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            let score = 0;
            
            // Simpele placeholder voor de game loop
            function draw() {
                ctx.fillStyle = "black";
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Pacman tekenen
                ctx.fillStyle = "yellow";
                ctx.beginPath();
                ctx.arc(300, 330, 20, 0.2 * Math.PI, 1.8 * Math.PI);
                ctx.lineTo(300, 330);
                ctx.fill();
                
                ctx.fillStyle = "white";
                ctx.font = "20px Arial";
                ctx.fillText("PACMAN IS NU ACTIEF!", 200, 200);
            }
            setInterval(draw, 100);
        }
    </script>
</body>
</html>
