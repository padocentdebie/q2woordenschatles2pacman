<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pacman Woordenschat Avontuur</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Arial', sans-serif; }
        body { background: #0f172a; color: #fff; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        header { grid-column: span 2; text-align: center; padding: 20px; background: #1e293b; border: 3px solid #3b82f6; border-radius: 15px; }
        h1 { color: #fbbf24; }
        
        /* Quiz & Woorden Sectie */
        .section { background: rgba(30, 41, 59, 0.9); padding: 20px; border-radius: 15px; border: 2px solid #3b82f6; }
        .word-list { max-height: 150px; overflow-y: auto; background: #0f172a; padding: 10px; margin: 10px 0; border-radius: 8px; }
        .word-item { font-size: 0.8em; padding: 5px; border-bottom: 1px solid #334155; }
        
        /* Quiz Styling */
        .question-box { background: #334155; padding: 15px; border-radius: 10px; margin: 15px 0; min-height: 60px; border-left: 5px solid #fbbf24; }
        .option-btn { width: 100%; text-align: left; padding: 10px; margin-bottom: 5px; background: #1e293b; color: white; border: 1px solid #3b82f6; cursor: pointer; border-radius: 5px; }
        .option-btn:hover { background: #3b82f6; }
        .correct { background: #15803d !important; }
        .incorrect { background: #b91c1c !important; }
        
        /* Pacman Canvas */
        .game-section { text-align: center; }
        canvas { background: black; border: 4px solid #3b82f6; border-radius: 10px; display: block; margin: 0 auto; }
        .start-game-btn { 
            width: 100%; padding: 15px; font-size: 1.2rem; font-weight: bold; border-radius: 8px; border: none; 
            background: #4b5563; color: #9ca3af; cursor: not-allowed; transition: 0.3s;
        }
        .unlocked { background: #f59e0b !important; color: white !important; cursor: pointer !important; box-shadow: 0 0 20px #f59e0b; }
        
        .feedback { padding: 10px; margin: 10px 0; border-radius: 5px; display: none; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Pacman Woordenschat</h1>
        <p>Scoor 5 punten in de quiz om Pacman te ontgrendelen!</p>
    </header>

    <div class="section">
        <h3>1. Woordenlijst</h3>
        <div class="word-list" id="word-list"></div>
        
        <button class="option-btn" style="background: #10b981;" onclick="generateQuestions()">Vragen Genereren</button>
        
        <div id="quiz-area">
            <h3 id="q-title">Beantwoord 5 vragen:</h3>
            <div class="question-box" id="question-box">Klik op 'Vragen Genereren'</div>
            <div id="options-container"></div>
            <div id="feedback" class="feedback"></div>
            <button id="next-btn" class="option-btn" style="display:none; background:#fbbf24; color:black;" onclick="loadQuestion()">Volgende Vraag</button>
        </div>
        
        <div style="margin-top:20px; font-size: 1.2em;">
            Voortgang: <span id="correct-count" style="color:#fbbf24; font-weight:bold;">0</span> / 5
        </div>
    </div>

    <div class="game-section section">
        <h3>2. Pacman Doolhof</h3>
        <div id="game-status" style="margin-bottom:10px;">Status: <span id="unlock-msg" style="color:red;">GEBLOKKEERD</span></div>
        <canvas id="gameCanvas" width="400" height="400"></canvas>
        <div style="margin-top:10px;">Score: <span id="game-score">0</span></div>
        <button id="start-game-btn" class="start-game-btn" disabled onclick="startGame()">START PACMAN</button>
    </div>
</div>

<script>
// ================= CONFIG & DATA =================
let vocabularyWords = [
    { word: "hypocrisie", meaning: "het veinzen van goede bedoelingen" },
    { word: "reprimande", meaning: "een strenge berisping" },
    { word: "annexeren", meaning: "het inlijven van een gebied" },
    { word: "futiel", meaning: "zinloos of onbeduidend" },
    { word: "veinzen", meaning: "doen alsof" },
    { word: "fascinerend", meaning: "interessant en boeiend" },
    { word: "decadentie", meaning: "cultureel verval" }
];

let questions = [];
let currentQIndex = 0;
let correctScore = 0;
const goal = 5;

// ================= QUIZ LOGICA =================
function updateWordList() {
    const list = document.getElementById('word-list');
    list.innerHTML = vocabularyWords.map(w => `<div class="word-item"><b>${w.word}</b>: ${w.meaning}</div>`).join('');
}

function generateQuestions() {
    questions = vocabularyWords.sort(() => Math.random() - 0.5).map(item => {
        let options = [item.meaning];
        while(options.length < 4) {
            let rand = vocabularyWords[Math.floor(Math.random()*vocabularyWords.length)].meaning;
            if(!options.includes(rand)) options.push(rand);
        }
        return { 
            q: `Wat is de betekenis van '${item.word}'?`, 
            correct: item.meaning, 
            options: options.sort(() => Math.random() - 0.5) 
        };
    });
    currentQIndex = 0;
    loadQuestion();
}

function loadQuestion() {
    document.getElementById('feedback').style.display = 'none';
    document.getElementById('next-btn').style.display = 'none';
    const q = questions[currentQIndex];
    document.getElementById('question-box').innerText = q.q;
    const container = document.getElementById('options-container');
    container.innerHTML = '';
    
    q.options.forEach(opt => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.innerText = opt;
        btn.onclick = () => checkAnswer(opt, btn);
        container.appendChild(btn);
    });
}

function checkAnswer(selected, btn) {
    const q = questions[currentQIndex];
    const btns = document.querySelectorAll('.option-btn');
    btns.forEach(b => b.style.pointerEvents = 'none');

    if(selected === q.correct) {
        btn.classList.add('correct');
        correctScore++;
        document.getElementById('correct-count').innerText = correctScore;
        if(correctScore >= goal) unlockGame();
    } else {
        btn.classList.add('incorrect');
    }
    
    document.getElementById('next-btn').style.display = 'block';
    currentQIndex++;
}

function unlockGame() {
    const btn = document.getElementById('start-game-btn');
    btn.disabled = false;
    btn.classList.add('unlocked');
    document.getElementById('unlock-msg').innerText = "ONTGRENDELD!";
    document.getElementById('unlock-msg').style.color = "#10b981";
}

// ================= PACMAN GAME ENGINE =================
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
let gameInterval;
let score = 0;

let pacman = { x: 20, y: 20, dir: 'right', nextDir: 'right' };
const tileSize = 20;
const map = [
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1],
    [1,0,1,0,1,0,1,1,1,0,1,1,1,0,1,0,1,1,0,1],
    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
    [1,0,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1],
    [1,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1],
    [1,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1],
    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
    [1,0,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1],
    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
];

function drawMap() {
    for(let r=0; r<map.length; r++) {
        for(let c=0; c<map[r].length; c++) {
            if(map[r][c] === 1) {
                ctx.fillStyle = "blue";
                ctx.fillRect(c*tileSize, r*tileSize, tileSize, tileSize);
            } else if(map[r][c] === 0) {
                ctx.fillStyle = "white";
                ctx.beginPath();
                ctx.arc(c*tileSize + 10, r*tileSize + 10, 2, 0, Math.PI*2);
                ctx.fill();
            }
        }
    }
}

function updatePacman() {
    let nextX = pacman.x, nextY = pacman.y;
    if(pacman.dir === 'left') nextX -= 2;
    if(pacman.dir === 'right') nextX += 2;
    if(pacman.dir === 'up') nextY -= 2;
    if(pacman.dir === 'down') nextY += 2;

    let col = Math.floor(nextX / tileSize);
    let row = Math.floor(nextY / tileSize);
    let col2 = Math.floor((nextX + 18) / tileSize);
    let row2 = Math.floor((nextY + 18) / tileSize);

    if(map[row][col] !== 1 && map[row2][col2] !== 1) {
        pacman.x = nextX; pacman.y = nextY;
    }

    // Eet bolletjes
    let gridX = Math.floor((pacman.x+10)/tileSize);
    let gridY = Math.floor((pacman.y+10)/tileSize);
    if(map[gridY][gridX] === 0) {
        map[gridY][gridX] = 2; // Gemaakt
        score += 10;
        document.getElementById('game-score').innerText = score;
    }
}

function drawPacman() {
    ctx.fillStyle = "yellow";
    ctx.beginPath();
    ctx.arc(pacman.x+10, pacman.y+10, 8, 0.2*Math.PI, 1.8*Math.PI);
    ctx.lineTo(pacman.x+10, pacman.y+10);
    ctx.fill();
}

function gameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawMap();
    updatePacman();
    drawPacman();
}

function startGame() {
    if(gameInterval) clearInterval(gameInterval);
    canvas.focus();
    gameInterval = setInterval(gameLoop, 20);
}

window.addEventListener("keydown", e => {
    if(e.key === "ArrowLeft") pacman.dir = "left";
    if(e.key === "ArrowRight") pacman.dir = "right";
    if(e.key === "ArrowUp") pacman.dir = "up";
    if(e.key === "ArrowDown") pacman.dir = "down";
});

updateWordList();
drawMap();
</script>

</body>
</html>
