<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pacman Woordenschat XXL - Met Spoken</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Arial', sans-serif; }
        body { background: #0f172a; color: #fff; padding: 20px; }
        .container { max-width: 1300px; margin: 0 auto; display: grid; grid-template-columns: 450px 1fr; gap: 20px; }
        header { grid-column: span 2; text-align: center; padding: 20px; background: #1e293b; border: 3px solid #3b82f6; border-radius: 15px; margin-bottom: 10px; }
        h1 { color: #fbbf24; }
        
        .section { background: rgba(30, 41, 59, 0.9); padding: 20px; border-radius: 15px; border: 2px solid #3b82f6; }
        .word-list { max-height: 150px; overflow-y: auto; background: #0f172a; padding: 10px; margin: 10px 0; border-radius: 8px; font-size: 0.8em; }
        .word-item { padding: 5px; border-bottom: 1px solid #334155; }
        
        .question-box { background: #334155; padding: 15px; border-radius: 10px; margin: 15px 0; min-height: 80px; border-left: 5px solid #fbbf24; font-weight: bold; font-size: 1.1em; }
        .option-btn { width: 100%; text-align: left; padding: 12px; margin-bottom: 8px; background: #1e293b; color: white; border: 1px solid #3b82f6; cursor: pointer; border-radius: 5px; transition: 0.2s; }
        .option-btn:hover { background: #3b82f6; }
        .correct { background: #15803d !important; border-color: #22c55e !important; }
        .incorrect { background: #b91c1c !important; border-color: #ef4444 !important; }
        
        canvas { background: black; border: 4px solid #3b82f6; border-radius: 10px; display: block; margin: 0 auto; box-shadow: 0 0 20px rgba(59, 130, 246, 0.5); }
        .start-game-btn { 
            width: 100%; padding: 15px; font-size: 1.2rem; font-weight: bold; border-radius: 8px; border: none; 
            background: #4b5563; color: #9ca3af; cursor: not-allowed; transition: 0.3s; margin-top: 15px;
        }
        .unlocked { background: #f59e0b !important; color: white !important; cursor: pointer !important; box-shadow: 0 0 20px #f59e0b; }
        .feedback { padding: 10px; margin: 10px 0; border-radius: 5px; font-weight: bold; text-align: center; height: 45px; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Pacman Woordenschat XXL</h1>
        <p>Beantwoord 5 vragen correct om te ontsnappen aan de spoken!</p>
    </header>

    <div class="section">
        <h3>1. Quiz</h3>
        <div class="word-list" id="word-list">Laden...</div>
        <button class="option-btn" style="background: #10b981; text-align: center; font-weight: bold;" onclick="generateQuestions()">Start Nieuwe Quiz</button>
        <div id="quiz-area">
            <div class="question-box" id="question-box">Genereer vragen om te beginnen.</div>
            <div id="options-container"></div>
            <div id="feedback" class="feedback"></div>
            <button id="next-btn" class="option-btn" style="display:none; background:#fbbf24; color:black; text-align:center; font-weight:bold;" onclick="loadQuestion()">VOLGENDE VRAAG ➔</button>
        </div>
        <div style="margin-top:20px; font-size: 1.2em; text-align: center; background: #1e293b; padding: 10px; border-radius: 10px;">
            Punten: <span id="correct-count" style="color:#fbbf24; font-weight:bold;">0</span> / 5
        </div>
    </div>

    <div class="game-section section">
        <h3>2. Het Doolhof</h3>
        <div id="game-status" style="margin-bottom:10px;">Status: <span id="unlock-msg" style="color:#ef4444; font-weight:bold;">GEBLOKKEERD</span></div>
        <canvas id="gameCanvas" width="600" height="400"></canvas>
        <div style="margin-top:10px; font-size: 1.2em;">Score: <span id="game-score">0</span> | <span id="status-text">Eet alle bolletjes!</span></div>
        <button id="start-game-btn" class="start-game-btn" disabled onclick="startGame()">START PACMAN</button>
    </div>
</div>

<script>
// ================= DATA =================
const rawWords = [
    { w: "zeer goede", c: "uitmuntende", o: ["aangename", "flinke"] },
    { w: "crèche", c: "kinderdagverblijf", o: ["gietemmer", "mensen met wie je verbonden bent"] },
    { w: "voerbakken", c: "troggen", o: ["donateurs", "filialen"] },
    { w: "ophef", c: "beroering", o: ["argumentatie", "walging"] },
    { w: "Een ... plan", c: "indrukwekkend", o: ["idioot", "gevoelig"] },
    { w: "fauteuil", c: "armstoel", o: ["leidinggevende functie", "traditioneel"] },
    { w: "rechten ... aan", c: "ontlenen", o: ["controleren", "bereiken"] },
    { w: "correspondentie", c: "briefwisseling", o: ["armstoel", "goedkeuring"] },
    { w: "barok", c: "stijl met kenmerk overdadige vormen", o: ["godsdienstuiting", "meer dan nodig is"] },
    { w: "aangewakkerd", c: "feller doen branden", o: ["niet fris", "met betrekking tot"] },
    { w: "belangstellend", c: "erbij betrokken zijn", o: ["met veel betekenis", "beter voordoen dan de werkelijkheid"] },
    { w: ".... weer", c: "onstuimig", o: ["sober", "uitbundig"] },
    { w: "eerbied", c: "respect", o: ["plotselinge gedachte", "godsdienst"] },
    { w: "het schip is ...", c: "buitengaats", o: ["enigszins", "tenminste"] },
    { w: "tja, dan vraag je...", c: "erom", o: ["ertoe", "erdoor"] },
    { w: "door ontsporing is het ... afgesloten", c: "traject", o: ["paviljoen", "festival"] },
    { w: "mode", c: "manier van kleden, denken, taalgebruik in een bepaalde tijd", o: ["humeur", "tekst in een krant"] },
    { w: "kanon", c: "zwaar vuurwapen met lange loop", o: ["machinegeweer", "handvuurwapen"] },
    { w: "moord / zware vorm van...", c: "doodslag", o: ["aanranding", "slijtage"] },
    { w: "hulp in de ..", c: "huishouding", o: ["administratie", "huisraad"] },
    { w: "continentaal", c: "behoort tot het vaste land", o: ["attractief", "laatste rustplaats"] },
    { w: "de ... in Europa", c: "economie", o: ["dyslexie", "criminaliteit"] },
    { w: "verandering van situatie", c: "overgang", o: ["omruil", "erosie"] },
    { w: "kleine ruimte in huis", c: "vliering", o: ["bedding", "achterkant"] },
    { w: "flora", c: "plantenwereld", o: ["wetenschap over de bodem van de aarde", "dierenwereld"] },
    { w: "kleding laten stomen", c: "door stoom schoonmaken", o: ["in vroegere staat herstellen", "kleding gladmaken met een strijkbout"] },
    { w: "bloederig slijm", c: "met veel bloed bedekt", o: ["waar veel van is", "gruwelijk"] },
    { w: "social media ... elkaar", c: "becommentariëren", o: ["bevrijden", "bewonderen"] },
    { w: "de ... is 4-4", c: "tussenstand", o: ["overtreding", "overwinning"] },
    { w: "opbouw van een tekst", c: "manier waarop de tekst is samengesteld", o: ["inleiding", "opschudding"] }
];

let questions = [];
let currentQIndex = 0;
let correctScore = 0;
const goal = 5;

// ================= QUIZ LOGICA =================
function updateWordList() {
    const list = document.getElementById('word-list');
    list.innerHTML = rawWords.map(item => `<div class="word-item"><b>${item.w}</b> = ${item.c}</div>`).join('');
}

function generateQuestions() {
    correctScore = 0;
    currentQIndex = 0;
    document.getElementById('correct-count').innerText = "0";
    questions = rawWords.sort(() => Math.random() - 0.5).map(item => {
        let allOptions = [item.c, ...item.o].sort(() => Math.random() - 0.5);
        return { q: item.w, correct: item.c, options: allOptions };
    });
    loadQuestion();
}

function loadQuestion() {
    if (currentQIndex >= questions.length) {
        document.getElementById('question-box').innerText = "Klaar! Klik op 'Start Nieuwe Quiz' voor meer.";
        return;
    }
    const q = questions[currentQIndex];
    document.getElementById('feedback').style.display = 'none';
    document.getElementById('next-btn').style.display = 'none';
    document.getElementById('question-box').innerText = `Wat hoort bij: "${q.q}"?`;
    const container = document.getElementById('options-container');
    container.innerHTML = '';
    q.options.forEach(opt => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.innerText = opt;
        btn.onclick = () => checkAnswer(opt, btn);
        container.appendChild(btn);
    });
}

function checkAnswer(selected, btn) {
    const q = questions[currentQIndex];
    document.querySelectorAll('.option-btn').forEach(b => b.style.pointerEvents = 'none');
    const feedback = document.getElementById('feedback');
    feedback.style.display = 'block';

    if(selected === q.correct) {
        btn.classList.add('correct');
        feedback.innerText = "Correct!";
        feedback.style.color = "#22c55e";
        correctScore++;
        document.getElementById('correct-count').innerText = correctScore;
        if(correctScore >= goal) unlockGame();
    } else {
        btn.classList.add('incorrect');
        feedback.innerText = `Fout! Het was: ${q.correct}`;
        feedback.style.color = "#ef4444";
    }
    currentQIndex++;
    document.getElementById('next-btn').style.display = 'block';
}

function unlockGame() {
    const btn = document.getElementById('start-game-btn');
    btn.disabled = false;
    btn.classList.add('unlocked');
    document.getElementById('unlock-msg').innerText = "TOEGANG VERLEEND!";
    document.getElementById('unlock-msg').style.color = "#22c55e";
}

// ================= PACMAN GAME ENGINE XXL =================
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const tileSize = 20;
let gameActive = false;
let score = 0;
let animationId;

let pacman = { x: 20, y: 20, dir: 'right', nextDir: 'right' };
let ghosts = [
    { x: 280, y: 140, color: 'red', dir: 'up' },
    { x: 300, y: 140, color: 'pink', dir: 'down' },
    { x: 280, y: 160, color: 'cyan', dir: 'left' },
    { x: 300, y: 160, color: 'orange', dir: 'right' }
];

const map = [
    [1,1,1,1,1,1,1,1,
